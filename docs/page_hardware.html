<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MD_SN76489 Library: Hardware Connections</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MajicDesigns_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MD_SN76489 Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Library for SN76489 sound generator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('page_hardware.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Hardware Connections </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>SN76489 IC Description </h2>
<p>The SN76489 Digital Complex Sound Generator (DCSG) is a TTL-compatible programmable sound generator chip from Texas Instruments. It provides:</p><ul>
<li>3 programmable square wave tone generators (122Hz to 125kHz)</li>
<li>1 noise generator (white noise and periodic noise at 3 different frequencies)</li>
<li>16 different volume levels</li>
<li>Simultaneous sounds</li>
</ul>
<p>The IC has 16 pins with the following pinout: </p><pre class="fragment"> D5 -&gt;  1 +-----+ 16 &lt;- Vcc
 D6 -&gt;  2 | S N | 15 &lt;- D4
 D7 -&gt;  3 |  7  | 14 &lt;- CLK
RDY -&gt;  4 |  6  | 13 &lt;- D3
/WE -&gt;  5 |  4  | 12 &lt;- D2
/CE -&gt;  6 |  8  | 11 &lt;- D1
AUD -&gt;  7 |  9  | 10 &lt;- D0
GND -&gt;  8 +-----+ 9  &lt;- N/C
</pre><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Signal  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">D0-D7  </td><td class="markdownTableBodyNone">Command byte inputs   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">/WE  </td><td class="markdownTableBodyNone">Active low Write Enable (latches data)   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">VCC  </td><td class="markdownTableBodyNone">5V   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GND  </td><td class="markdownTableBodyNone">Ground   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AUD  </td><td class="markdownTableBodyNone">Audio output (headphone jack)   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CLK  </td><td class="markdownTableBodyNone">4MHz clock signal (see below)   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/CE  </td><td class="markdownTableBodyNone">Active low Chip Enable (connect to GND or MCU output if more than one IC shares D0-D7)   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">RDY  </td><td class="markdownTableBodyNone">Ready signal (unused).   </td></tr>
</table>
<p>Note: If multiple ICs are interfaced, then the ICs CE line must also be used to select the right device and share the data lines. This is not managed by the library and needs to be part of the user application.</p>
<h2>Tone Generators </h2>
<p>The frequency of the square waves produced by the tone generators on each channel is derived from two factors:</p><ul>
<li>The speed of the external clock.</li>
<li>A value provided in a control register for that channel (called N).</li>
</ul>
<p>Each channel's frequency is arrived at by dividing the external clock by 32 and then dividing the result by N. Thus the overall divider range is from 32 to 32768. This gives a frequency range at maximum input clock rate of 122Hz to 125kHz (a range from roughly A2, two octaves below middle A, to 5-6 times the generally accepted limits of human audio perception).</p>
<h2>The 4MHz Clock Signal </h2>
<p>The clock signal may be supplied from external hardware or can be created by the MCU. This can be specified class initializer parameters.</p>
<p>The MCU may have a timer capable of generating the 4MHz clock. This is a hardware dependent function implemented in the private startClock() method. The output is usually restricted to a processor specific pin which can be connected to the IC CLK input. The currently supported hardware is</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CPU Type  </th><th class="markdownTableHeadNone">Example Board  </th><th class="markdownTableHeadNone">Resource  </th><th class="markdownTableHeadNone">Pin   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ATmega328P  </td><td class="markdownTableBodyNone">Uno, Nano, Mini  </td><td class="markdownTableBodyNone">Timer 2  </td><td class="markdownTableBodyNone">Pin 3   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ATmega32U4  </td><td class="markdownTableBodyNone">Teensy 2.0, Leonardo  </td><td class="markdownTableBodyNone">Timer 1  </td><td class="markdownTableBodyNone">Pin 14   </td></tr>
</table>
<p>If the library does not have code for the particular MCU, a compiler warning is generated and the private startClock() method is compiled with no code. Obviously, this results in no clock signal generated by the MCU and an external clock signal must be provided.</p>
<p>If an external hardware clock is used, then the library can be prevented from starting the MCU clock in the class initialization parameters.</p>
<h2>Hardware Direct Connection to the MCU </h2>
<p>The derived class SN_SN76489_Direct uses 8 digital output data lines from the Arduino MCU and an additional Write Enable digital output to load the data into the SN76489 IC.</p>
<p>The data pins used are for the application to specify as part of the object initialization parameters. The D array parameter has pin numbers arranged to correspond to the IC pins (ie, pin D[0] is connected to IC pin D0, D[1] to D1, etc). The WE pin can be any arbitrary pin.</p>
<p>Connections between the MCU and SN76489 are mapped as shown below. The Arduino pins are arbitrary except the 4Mhz clock - the pins shown are used in the library examples.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Arduino Pin  </th><th class="markdownTableHeadNone">SN76489   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">D0 [A0]  </td><td class="markdownTableBodyNone">D0 [ 3]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">D1 [A1]  </td><td class="markdownTableBodyNone">D1 [ 2]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">D2 [A2]  </td><td class="markdownTableBodyNone">D2 [ 1]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">D3 [A3]  </td><td class="markdownTableBodyNone">D3 [15]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">D4 [ 4]  </td><td class="markdownTableBodyNone">D4 [13]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">D5 [ 5]  </td><td class="markdownTableBodyNone">D5 [12]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">D6 [ 6]  </td><td class="markdownTableBodyNone">D6 [11]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">D7 [ 7]  </td><td class="markdownTableBodyNone">D7 [10]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">WE [ 8]  </td><td class="markdownTableBodyNone">/WE [ 5]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4Mhz [ 3]  </td><td class="markdownTableBodyNone">CLK [14]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/OE [ 6] (GND)   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">AUDIO [ 7] (Amplifier)   </td></tr>
</table>
<h2>SPI Connection the the MCU </h2>
<p>The derived class SN_SN76489_SPI uses 3 SPI pins (LD, CLK and DAT) from the Arduino MCU to a 74595 Serial to Parallel buffer IC and an additional Write Enable digital output to load the data from the 595 outputs to into the SN76489 IC.</p>
<p>This uses less pins than a direct connection but requires an additional IC. The pins used are arbitrary and specified by the application as part of the object initialization parameters.</p>
<p>Connections between the MCU, 74595 and SN76489 are mapped as shown below. The Arduino pins are arbitrary except the 4Mhz clock - the pins shown are used in the library examples.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Arduino Pin  </th><th class="markdownTableHeadNone">74595 buffer  </th><th class="markdownTableHeadNone">SN76489   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D0 [15]  </td><td class="markdownTableBodyNone">D0 [ 3]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D1 [ 1]  </td><td class="markdownTableBodyNone">D1 [ 2]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D2 [ 2]  </td><td class="markdownTableBodyNone">D2 [ 1]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D3 [ 3]  </td><td class="markdownTableBodyNone">D3 [15]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D4 [ 4]  </td><td class="markdownTableBodyNone">D4 [13]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D5 [ 5]  </td><td class="markdownTableBodyNone">D5 [12]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D6 [ 6]  </td><td class="markdownTableBodyNone">D6 [11]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">D7 [ 7]  </td><td class="markdownTableBodyNone">D7 [10]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Data [11]  </td><td class="markdownTableBodyNone">DAT [14]  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Load [10]  </td><td class="markdownTableBodyNone">LD [12]  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Clock [13]  </td><td class="markdownTableBodyNone">CLK [11]  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/OE [13] (GND)  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/MR [10] (+5V)  </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">WE [ 8]  </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/WE [ 5]   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4Mhz [ 3]  </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">CLK [14]   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/OE [ 6] (GND)   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">AUDIO [ 7] (Amplifier)   </td></tr>
</table>
<h2>Audio Output </h2>
<p>The Audio output from pin 7 of the IC is a mono signal that can be heard directly fed into earbuds. Connection to external speaker must be through an amplifier.</p>
<div class="image">
<img src="SN76489_Audio_Out.png" alt=""/>
<div class="caption">
SN76489 Audio Output</div></div>
    </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Sep 20 2019 12:04:46 for MD_SN76489 Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
